# Object Mother , Test Builder

í…ŒìŠ¤íŠ¸ë¥¼ í•˜ê²Œ ë˜ë©´, ê°ì²´ ìƒì„±ì— ëŒ€í•´ ë§ì€ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ë°–ì— ì—†ë‹¤. 

```java
Invoice invoice = new Invoice(
    new Recipient("Sherlock Holmes",
        new Address("221b Baker Street", 
                    "London", 
                    new PostCode("NW1", "3RX"))),
    new InvoiceLines(
        new InvoiceLine("Deerstalker Hat", 
            new PoundsShillingsPence(0, 3, 10)),
        new InvoiceLine("Tweed Cape", 
            new PoundsShillingsPence(0, 4, 12))));
```

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´  `ObjectMother` ëŠ” ì •ì  íŒ©í† ë¦¬ íŒ¨í„´ì„ í†µí•œ ê°„ë‹¨í•œ ë©”ì„œë“œ í˜¸ì¶œì„ í†µí•´ ì‚¬ì „ ì œì‘ëœ í…ŒìŠ¤íŠ¸ ì¤€ë¹„ëœ ê°ì²´ë¥¼ ì œê³µí•¨ìœ¼ë¡œì¨, ìƒì„±ëœ ê°ì²´ì˜ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì„ í•  ìˆ˜ ìˆë‹¤. 

```java
Invoice invoice = TestInvoices.newDeerstalkerAndCapeInvoice();
```

í•˜ì§€ë§Œ, ObjectMother ë˜í•œ í…ŒìŠ¤íŠ¸ ë°ì´í„°ì˜ ë³€í™”ì— ì·¨ì•½í•˜ë‹¤. ì•½ê°„ ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ í•„ìš”í•  ë•Œë§ˆë‹¤ ê°ì²´ ë§ˆë”ì— ë‹¤ë¥¸ íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤. 

```java
Invoice invoice1 = TestInvoices.newDeerstalkerAndCapeAndSwordstickInvoice();
Invoice invoice2 = TestInvoices.newDeerstalkerAndBootsInvoice();
...
```

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´, ë¹Œë” íŒ¨í„´ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤. 

```java
public class InvoiceBuilder {
    Recipient recipient = new RecipientBuilder().build();
    InvoiceLines lines = new InvoiceLines(new InvoiceLineBuilder().build());
    PoundsShillingsPence discount = PoundsShillingsPence.ZERO;

    public InvoiceBuilder withRecipient(Recipient recipient) {
        this.recipient = recipient;
        return this;
    }

    public InvoiceBuilder withInvoiceLines(InvoiceLines lines) {
        this.lines = lines;
        return this;
    }

    public InvoiceBuilder withDiscount(PoundsShillingsPence discount) {
        this.discount = discount;
        return this;
    }

    public Invoice build() {
        return new Invoice(recipient, lines, discount);
    }
}
```

ì´ëŠ” ê°€ë…ì„±ì—ë„ ë„ì›€ì´ ëœë‹¤. 

```java
Invoice invoiceWithNoPostcode =new InvoiceBuilder()
    .withRecipient(new RecipientBuilder()
        .withAddress(new AddressBuilder()
            .withNoPostcode()
            .build())
        .build())
    .build();
```

[Mistaeks I Hav Made: Test Data Builders: an alternative to the Object Mother
    pattern](http://natpryce.com/articles/000714.html)

<aside>
ğŸ’¡ givenì—ì„œ ë„ˆë¬´ ë§ì€ ê°ì²´ë¥¼ ìƒì„±í•´ì„œ ë¶ˆí¸í–ˆëŠ”ë° builder Patternì„ í†µí•´ ê°ì²´ ìƒì„±ì„ í•´ë´ì•¼ ê² ë‹¤..!

</aside>

---

# ë¹ˆì•½í•œ ë„ë©”ì¸ ëª¨ë¸ vs í’ë¶€í•œ ë„ë©”ì¸ ëª¨ë¸, ê³„ì¸µí™”

ë§ˆí‹´ í¬ìš¸ëŸ¬ ì•„ì €ì”¨ëŠ” ë¹ˆì•½í•œ ë„ë©”ì¸ ëª¨ë¸ì— ëŒ€í•´ ë¶€ì •ì ìœ¼ë¡œ ìƒê°í•˜ë„¤ìš”. ìˆœìˆ˜í•œ ê°ì²´ì§€í–¥ì  ëª¨ë¸ê³¼ ìƒë°˜ë˜ì–´, ì´ì ì„ ì „í˜€ ì–»ì§€ ëª»í•œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤. 

- ë¹ˆì•½í•œ ë„ë©”ì¸ ëª¨ë¸.

 ë„ë©”ì¸ ê°ì²´ì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ê±°ì˜ ë˜ëŠ” ì „í˜€ í¬í•¨ë˜ì§€ ì•ŠëŠ” í”„ë¡œê·¸ë˜ë° ë°˜ëŒ€ íŒ¨í„´ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ëŒ€ì‹  ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì€ ë„ë©”ì¸ ê°œì²´ë¥¼ ì¡°ì‘í•˜ëŠ” ë³„ë„ì˜ ì„œë¹„ìŠ¤ ê°œì²´ì— êµ¬í˜„ë©ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ì½”ë“œë² ì´ìŠ¤ì˜ ìœ ì§€ ê´€ë¦¬ ë° ë¦¬íŒ©í„°ë§ì´ ë” ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë„ë©”ì¸ ê°ì²´ëŠ” ëŒ€ë¶€ë¶„ ê²Œí„°ì™€ ì„¸í„°ê°€ ìˆëŠ” ë°ì´í„° ì»¨í…Œì´ë„ˆì— ë¶ˆê³¼í•˜ê³  ë™ì‘ê³¼ ë¡œì§ì€ ì™¸ë¶€ ì„œë¹„ìŠ¤ ê°ì²´ê°€ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ëŠ” ë°ì´í„°ì™€ ë™ì‘ì„ ë™ì¼í•œ ê°ì²´ì— ê²°í•©í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•˜ëŠ” ê°ì²´ ì§€í–¥ ì„¤ê³„ì˜ ì›ì¹™ì— ìœ„ë°°ë©ë‹ˆë‹¤.

ë‹¤ìŒì€ Rectangle í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹ˆì•½í•œ ë„ë©”ì¸ ëª¨ë¸ê³¼ í’ë¶€í•œ ë„ë©”ì¸ ëª¨ë¸ì˜ ì°¨ì´ì ì„ ì„¤ëª…í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤:

- ë¹ˆì•½í•œ ë„ë©”ì¸

```java
class Rectangle
{
    public int Height { get; set; }
    public int Width { get; set; }
}
```

- í’ë¶€í•œ ë„ë©”ì¸

```java
class Rectangle
{
    public Rectangle(int height, int width)
    {
        if (height <= 0)
        {
            throw new ArgumentOutOfRangeException(nameof(height));
        }
        if (width <= 0)
        {
            throw new ArgumentOutOfRangeException(nameof(width));
        }
        Height = height;
        Width = width;
    }
    public int Height { get; }
    public int Width { get; }
    public int Area => Height * Width;
}
```

[ë¹ˆì•½í•œ ë„ë©”ì¸ ëª¨ë¸ (Anemic Domain Model)](https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=muchine98&logNo=220304821784)

[bliki: AnemicDomainModel](https://www.martinfowler.com/bliki/AnemicDomainModel.html)

# Test Fixture

í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜ëŠ” ëª¨ë“  í…ŒìŠ¤íŠ¸ì— ëŒ€í•œ ì „ì œ ì¡°ê±´ ë° í›„ì œ ì¡°ê±´ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì½”ë“œì˜ ê³ ì •ëœ ìƒíƒœ ë˜ëŠ” ë‹¨ê³„ ì§‘í•©ì…ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜ëŠ” ë°˜ë³µ ê°€ëŠ¥í•œ ê²°ê³¼ë¥¼ ë³´ì¥í•˜ê¸° ìœ„í•´ í…ŒìŠ¤íŠ¸ê°€ ì‹¤í–‰ë˜ëŠ” ì˜ ì•Œë ¤ì§„ ê³ ì •ëœ í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª©ì ì€ ëª¨ë“  í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ì— ëŒ€í•œ ê³µí†µ ì½”ë“œì˜ ì¤‘ë³µì„ ì œê±°í•˜ê³  í…ŒìŠ¤íŠ¸ ë©”ì„œë“œê°€ ì‹¤í–‰ë  ì¼ê´€ëœ í™˜ê²½ì„ ì„¤ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

In the context of JUnit, a test fixture can be implemented using lifecycle annotations such asÂ `@Before`,Â `@After`,Â `@BeforeClass`,Â `@AfterClass`, andÂ `@Test`. These annotations allow you to define methods that are executed before and after each test case (`@Before`Â andÂ `@After`), as well as before and after the entire test class (`@BeforeClass`Â andÂ `@AfterClass`).

ë‹¤ìŒì€ Beforeê³¼ Afterì´ ì“°ì¸ ì˜ˆì‹œì…ë‹ˆë‹¤.

```java
import org.junit.Before;
import org.junit.After;
import org.junit.Test;

public class MyTestClass {

    @Before
    public void setUp() {
        // Perform setup steps here
    }

    @After
    public void tearDown() {
        // Perform cleanup steps here
    }

    @Test
    public void testMethod1() {
        // Test logic for method 1
    }

    @Test
    public void testMethod2() {
        // Test logic for method 2
    }
}
```

ì´ ì˜ˆì œì—ì„œëŠ” setUp() ë©”ì„œë“œì— `@Before`ê°€ ì£¼ì„ ì²˜ë¦¬ë˜ì–´ ê° í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ì•ì— ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ ë©”ì„œë“œëŠ” ì¼ë°˜ì ì¸ ê°ì²´ë¥¼ ì´ˆê¸°í™”í•˜ê±°ë‚˜ í…ŒìŠ¤íŠ¸ì— í•„ìš”í•œ íŠ¹ì • ìƒíƒœë¥¼ ì„¤ì •í•˜ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤`. After`ë¡œ ì–´ë…¸í…Œì´ì…˜ëœ tearDown() ë©”ì„œë“œëŠ” ê° í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ì´í›„ì— ì‹¤í–‰ë˜ë©° ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ê±°ë‚˜ í…ŒìŠ¤íŠ¸ ì¤‘ì— ë³€ê²½í•œ ë‚´ìš©ì„ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
